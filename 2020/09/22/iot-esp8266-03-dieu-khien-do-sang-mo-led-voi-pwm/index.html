<!DOCTYPE html>
<html lang="vi">

<!-- Mirrored from localhost/2020/09/22/iot-esp8266-03-dieu-khien-do-sang-mo-led-voi-pwm/ by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 23 Sep 2020 17:34:49 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link rel="profile" href="http://gmpg.org/xfn/11">
		<title>IOT-ESP8266: 03-Điều khiển độ sáng/mờ led với PWM &#8211; CoderVN</title>
<link rel='dns-prefetch' href='http://fonts.googleapis.com/' />
<link rel='dns-prefetch' href='http://s.w.org/' />
<link rel="alternate" type="application/rss+xml" title="Dòng thông tin CoderVN &raquo;" href="../../../../feed/index.html" />
		<script type="text/javascript">
			window._wpemojiSettings = {"baseUrl":"https:\/\/s.w.org\/images\/core\/emoji\/13.0.0\/72x72\/","ext":".png","svgUrl":"https:\/\/s.w.org\/images\/core\/emoji\/13.0.0\/svg\/","svgExt":".svg","source":{"concatemoji":"http:\/\/localhost\/wp-includes\/js\/wp-emoji-release.min.js?ver=5.5.1"}};
			!function(e,a,t){var r,n,o,i,p=a.createElement("canvas"),s=p.getContext&&p.getContext("2d");function c(e,t){var a=String.fromCharCode;s.clearRect(0,0,p.width,p.height),s.fillText(a.apply(this,e),0,0);var r=p.toDataURL();return s.clearRect(0,0,p.width,p.height),s.fillText(a.apply(this,t),0,0),r===p.toDataURL()}function l(e){if(!s||!s.fillText)return!1;switch(s.textBaseline="top",s.font="600 32px Arial",e){case"flag":return!c([127987,65039,8205,9895,65039],[127987,65039,8203,9895,65039])&&(!c([55356,56826,55356,56819],[55356,56826,8203,55356,56819])&&!c([55356,57332,56128,56423,56128,56418,56128,56421,56128,56430,56128,56423,56128,56447],[55356,57332,8203,56128,56423,8203,56128,56418,8203,56128,56421,8203,56128,56430,8203,56128,56423,8203,56128,56447]));case"emoji":return!c([55357,56424,8205,55356,57212],[55357,56424,8203,55356,57212])}return!1}function d(e){var t=a.createElement("script");t.src=e,t.defer=t.type="text/javascript",a.getElementsByTagName("head")[0].appendChild(t)}for(i=Array("flag","emoji"),t.supports={everything:!0,everythingExceptFlag:!0},o=0;o<i.length;o++)t.supports[i[o]]=l(i[o]),t.supports.everything=t.supports.everything&&t.supports[i[o]],"flag"!==i[o]&&(t.supports.everythingExceptFlag=t.supports.everythingExceptFlag&&t.supports[i[o]]);t.supports.everythingExceptFlag=t.supports.everythingExceptFlag&&!t.supports.flag,t.DOMReady=!1,t.readyCallback=function(){t.DOMReady=!0},t.supports.everything||(n=function(){t.readyCallback()},a.addEventListener?(a.addEventListener("DOMContentLoaded",n,!1),e.addEventListener("load",n,!1)):(e.attachEvent("onload",n),a.attachEvent("onreadystatechange",function(){"complete"===a.readyState&&t.readyCallback()})),(r=t.source||{}).concatemoji?d(r.concatemoji):r.wpemoji&&r.twemoji&&(d(r.twemoji),d(r.wpemoji)))}(window,document,window._wpemojiSettings);
		</script>
		<style type="text/css">
img.wp-smiley,
img.emoji {
	display: inline !important;
	border: none !important;
	box-shadow: none !important;
	height: 1em !important;
	width: 1em !important;
	margin: 0 .07em !important;
	vertical-align: -0.1em !important;
	background: none !important;
	padding: 0 !important;
}
</style>
	<link rel='stylesheet' id='wp-block-library-css'  href='../../../../wp-includes/css/dist/block-library/style.mind03b.css?ver=5.5.1' type='text/css' media='all' />
<link rel='stylesheet' id='type-fonts-css'  href='https://fonts.googleapis.com/css?family=Nunito+Sans%3A400%2C700%2C300%2C400italic%2C700italic%7CPoppins%3A400%2C700&amp;subset=latin%2Clatin-ext%2Cvietnamese&amp;display=fallback' type='text/css' media='all' />
<link rel='stylesheet' id='type-material-icons-css'  href='https://fonts.googleapis.com/icon?family=Material+Icons&amp;display=swap' type='text/css' media='all' />
<link rel='stylesheet' id='type-social-icons-css'  href='../../../../wp-content/themes/type/fonts/socicon.min49eb.css?ver=3.5.2' type='text/css' media='all' />
<link rel='stylesheet' id='type-style-css'  href='../../../../wp-content/themes/type/stylecfa9.css?ver=1.1.2' type='text/css' media='all' />
<style id='type-style-inline-css' type='text/css'>
.header-image {padding-top: 20px;padding-bottom: 20px;}
		.header-image:before {
		content: '';
		position: absolute;
		left: 0;
		top: 0;
		width: 100%;
		height: 100%;
		background-color: #000;
		}.header-image:before {opacity: 0.40;}
</style>
<link rel='stylesheet' id='enlighterjs-css'  href='../../../../wp-content/plugins/enlighter/cache/enlighterjs.min5b97.css?ver=0A0B0C' type='text/css' media='all' />
<script type='text/javascript' src='../../../../wp-includes/js/jquery/jquery4a5f.js?ver=1.12.4-wp' id='jquery-core-js'></script>
<link rel="https://api.w.org/" href="../../../../wp-json/index.html" /><link rel="alternate" type="application/json" href="../../../../wp-json/wp/v2/posts/155.json" /><link rel="EditURI" type="application/rsd+xml" title="RSD" href="../../../../xmlrpc0db0.php?rsd" />
<link rel="wlwmanifest" type="application/wlwmanifest+xml" href="../../../../wp-includes/wlwmanifest.xml" /> 
<link rel='prev' title='IOT-ESP8266: 02-Chương trình nháy led' href='../../21/iot-esp8266-02-chuong-trinh-nhay-led/index.html' />
<link rel='next' title='IOT-ESP8266: 04-Đọc tín hiệu biến trở' href='../iot-esp8266-04-doc-tin-hieu-bien-tro/index.html' />
<meta name="generator" content="WordPress 5.5.1" />
<link rel="canonical" href="index.html" />
<link rel='shortlink' href='../../../../index43b2.html?p=155' />
<link rel="alternate" type="application/json+oembed" href="../../../../wp-json/oembed/1.0/embedd009.json?url=http%3A%2F%2Flocalhost%2F2020%2F09%2F22%2Fiot-esp8266-03-dieu-khien-do-sang-mo-led-voi-pwm%2F" />
<link rel="alternate" type="text/xml+oembed" href="../../../../wp-json/oembed/1.0/embedc6d8?url=http%3A%2F%2Flocalhost%2F2020%2F09%2F22%2Fiot-esp8266-03-dieu-khien-do-sang-mo-led-voi-pwm%2F&amp;format=xml" />
</head>
<body class="post-template-default single single-post postid-155 single-format-standard header-layout1 fimg-fullwidth content-fullwidth">

<div id="page" class="site">
	<a class="skip-link screen-reader-text" href="#main">Chuyển tới phần nội dung</a>
	
	<div class="mobile-navbar clear">
		<a id="menu-toggle" class="menu-toggle" href="#mobile-navigation" title="Menu"><span class="button-toggle"></span></a>
					<div class="top-search">
				<span id="top-search-button" class="top-search-button"><i class="search-icon"></i></span>
				
<form role="search" method="get" class="search-form clear" action="http://localhost/">
	<label>
		<span class="screen-reader-text">Kết quả tìm kiếm cho:</span>
		<input type="search" id="s" class="search-field" placeholder="Tìm &hellip;" value="" name="s" />
	</label>
	<button type="submit" class="search-submit">
		<i class="material-icons md-20 md-middle">&#xE8B6;</i> <span class="screen-reader-text">
		Tìm</span>
	</button>
</form>
			</div>
			</div>
	<div id="mobile-sidebar" class="mobile-sidebar"> 
		<nav id="mobile-navigation" class="main-navigation mobile-navigation" role="navigation" aria-label="Menu chính"></nav>
	</div>
	
	<header id="masthead" class="site-header " role="banner">
		
	<div class="site-title-centered">
		
					
				<div class="site-branding">
								<p class="site-title"><a href="../../../../index.html" rel="home">CoderVN</a></p>
													<p class="site-description">Hành trình trở thành FULL STACK DEVELOPER</p>
										
	<div id="social-links" class="social-links">
			</div>				</div><!-- .site-branding -->
				
							
			
		<div class="main-navbar">
			<div class="container">
				
	<nav id="site-navigation" class="main-navigation" role="navigation" aria-label="Menu chính">
		<ul id="main-menu" class="main-menu"><li id="menu-item-15" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-home menu-item-15"><a href="../../../../index.html">Trang chủ</a></li>
<li id="menu-item-66" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-66"><a href="../../../../chu-de/index.html">Chủ đề</a></li>
<li id="menu-item-67" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-home menu-item-67"><a href="../../../../gioi-thieu/index.html">Giới thiệu</a></li>
<li id="menu-item-89" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-89"><a href="../../../../lien-he/index.html">Liên hệ</a></li>
</ul>	</nav>
										<div class="top-search">
						<span id="top-search-button" class="top-search-button"><i class="search-icon"></i></span>
						
<form role="search" method="get" class="search-form clear" action="http://localhost/">
	<label>
		<span class="screen-reader-text">Kết quả tìm kiếm cho:</span>
		<input type="search" id="s" class="search-field" placeholder="Tìm &hellip;" value="" name="s" />
	</label>
	<button type="submit" class="search-submit">
		<i class="material-icons md-20 md-middle">&#xE8B6;</i> <span class="screen-reader-text">
		Tìm</span>
	</button>
</form>
					</div>
							</div>
		</div>
		
	</div>
		</header><!-- #masthead -->
	
		
	<div id="content" class="site-content">
		<div class="container">
			<div class="inside">

	
			<div class="featured-image">
			<div class="entry-header">
				<div class="entry-meta entry-category">
					<span class="cat-links"><a href="../../../../category/lap-trinh-arduino/index.html" rel="category tag">Lập trình arduino</a></span>
				</div>
				<h1 class="entry-title"><span>IOT-ESP8266: 03-Điều khiển độ sáng/mờ led với PWM</span></h1>				<div class="entry-meta">
					<span class="posted-on"><span class="screen-reader-text">Đăng vào</span><a href="index.html" rel="bookmark"><time class="entry-date published" datetime="2020-09-22T16:37:13+00:00">22 Tháng Chín, 2020</time><time class="updated" datetime="2020-09-23T16:12:36+00:00">23 Tháng Chín, 2020</time></a></span><span class="byline"><span class="author vcard"><span class="screen-reader-text">Tác giả</span><a class="url fn n" href="../../../../author/codervn/index.html">codervn</a></span></span>				</div>
			</div>
					</div>
		
	<div id="primary" class="content-area">
		<main id="main" class="site-main" role="main">
	
		
<article id="post-155" class="post-155 post type-post status-publish format-standard has-post-thumbnail hentry category-lap-trinh-arduino tag-lap-trinh-arduino-2 tag-lap-trinh-arduino-3 tag-lap-trinh-node-mcu tag-lap-trinh-node-mcu-2 tag-lap-trinh-nodemcu-2 tag-lap-trinh-nodemcu-3 tag-tim-hieu-esp8266 tag-tim-hieu-esp8266-2 tag-tim-hieu-nodemcu tag-tim-hieu-nodemcu-2">
		
		
	
	<div class="entry-content">
		
<p>Ở bài trước chúng ta đã làm được ứng dụng điều khiển sáng-tắt led cũng khá đơn giản 😀 Nhưng việc điều khiển led không chỉ dừng ở việc chỉ bật tắt led, chúng ta còn có thể điều khiển mức sáng của các led bằng cách điều khiển sáng/tắt luân phiên nhau với tần số lớn </p>



<p></p>



<figure class="wp-block-image size-large"><img loading="lazy" width="895" height="182" src="../../../../wp-content/uploads/2020/09/led-fade.png" alt="" class="wp-image-159"/></figure>



<p>Ở trên là ví dụ về các mức sáng trên led, bao gồm 5 mức. Trong đó có 2 mức dễ nhận biết và dễ điều khiển nhất là 0%(ứng với led đang tắt) và 100% (ứng với mức led sáng nhất-đang bật led liên tục). Vậy 3 mức ở giữa thì như thế nào, các bạn xem hình bên dưới nhé </p>



<figure class="wp-block-image size-large"><img loading="lazy" width="711" height="658" src="../../../../wp-content/uploads/2020/09/PWM-how-it-works.png" alt="" class="wp-image-161"/></figure>



<p>Có 2 thuật ngữ chúng ta cần quan tâm đó là period và duty cycle. Period tương ứng với chu kỳ, độ rộng của period dùng để tính tần số xung hoặc suy ngược lại từ tần số đặt để tính ra giá trị period. Duty cycle là chu kỳ của mức xung tích cực, trong bài viết này mức xung tích cực là dương, ngoài ra duty cycle còn có thể là mức xung thấp, tùy theo mạch thiết kế</p>



<p>Duty cycle 50% dẫn đến độ sáng LED 50%, Duty cycle bằng 0 có nghĩa là đèn LED tắt hoàn toàn và chu kỳ nhiệm vụ 100 có nghĩa là đèn LED bật hoàn toàn. Thay đổi Duty cycle là cách bạn tạo ra các mức độ sáng khác nhau.</p>



<p><strong>Sử dụng PWM trong ArduinoIDE</strong></p>



<p>Trong arduino có các hàm để xuất pwm:</p>



<ul><li>analogWrite(pin, value): dùng để tạo tín hiệu pwm trên một chân nào đó</li><li>analogWriteRange(new_range): bạn cũng có thể thay đổi phạm vi PWM</li><li>analogWriteFreq(new_frequency): Theo mặc định, tần số PWM của ESP8266 là 1kHz. Bạn có thể thay đổi tần số PWM bằng lệnh này</li></ul>



<p><strong>Kết nối phần cứng</strong></p>



<p>Cũng tương tự như phần cứng bài trước để test led 😀 </p>



<figure class="wp-block-image size-large"><img loading="lazy" width="930" height="543" src="../../../../wp-content/uploads/2020/09/ESP8266_PWM_bb.png" alt="" class="wp-image-163"/></figure>



<p><strong>Code</strong></p>



<pre class="wp-block-code"><code>const int ledPin = 2; 

void setup() {
  
}

void loop() {
  // increase the LED brightness
  for(int dutyCycle = 0; dutyCycle &amp;lt; 1023; dutyCycle++){   
    // changing the LED brightness with PWM
    analogWrite(ledPin, dutyCycle);
    delay(1);
  }

  // decrease the LED brightness
  for(int dutyCycle = 1023; dutyCycle > 0; dutyCycle--){
    // changing the LED brightness with PWM
    analogWrite(ledPin, dutyCycle);
    delay(1);
  }
}</code></pre>



<p><strong>Kết quả</strong></p>



<p>Để có thể quan sát được xung pwm các bạn nên dùng oscilloscope để đo nhé 😀</p>



<figure class="wp-block-image size-large"><img loading="lazy" width="655" height="481" src="../../../../wp-content/uploads/2020/09/PWM_signal_ESP8266_oscilloscope.png" alt="" class="wp-image-169"/></figure>



<p></p>
	</div><!-- .entry-content -->

	<footer class="entry-footer">
		<span class="tags-links">Tag <a href="../../../../tag/lap-trinh-arduino-2/index.html" rel="tag">lập trình arduino</a>, <a href="../../../../tag/lap-trinh-arduino-3/index.html" rel="tag">lap trình arduino</a>, <a href="../../../../tag/lap-trinh-node-mcu/index.html" rel="tag">lap trinh node mcu</a>, <a href="../../../../tag/lap-trinh-node-mcu-2/index.html" rel="tag">lập trình node mcu</a>, <a href="../../../../tag/lap-trinh-nodemcu-2/index.html" rel="tag">lap trinh nodemcu</a>, <a href="../../../../tag/lap-trinh-nodemcu-3/index.html" rel="tag">lập trình nodemcu</a>, <a href="../../../../tag/tim-hieu-esp8266/index.html" rel="tag">tìm hiểu esp8266</a>, <a href="../../../../tag/tim-hieu-esp8266-2/index.html" rel="tag">tim hieu esp8266</a>, <a href="../../../../tag/tim-hieu-nodemcu/index.html" rel="tag">tìm hiểu nodemcu</a>, <a href="../../../../tag/tim-hieu-nodemcu-2/index.html" rel="tag">tim hieu nodemcu</a></span>	</footer><!-- .entry-footer -->
	
</article><!-- #post-## -->


	<nav class="navigation post-navigation" role="navigation" aria-label="Bài viết">
		<h2 class="screen-reader-text">Điều hướng bài viết</h2>
		<div class="nav-links"><div class="nav-previous"><a href="../../21/iot-esp8266-02-chuong-trinh-nhay-led/index.html" rel="prev">IOT-ESP8266: 02-Chương trình nháy led</a></div><div class="nav-next"><a href="../iot-esp8266-04-doc-tin-hieu-bien-tro/index.html" rel="next">IOT-ESP8266: 04-Đọc tín hiệu biến trở</a></div></div>
	</nav>
		</main><!-- #main -->
	</div><!-- #primary -->


			</div><!-- .inside -->
		</div><!-- .container -->
	</div><!-- #content -->

	<footer id="colophon" class="site-footer" role="contentinfo">
		
				
				
		<div class="footer-copy">
			<div class="container">
				<div class="row">
					<div class="col-6 col-sm-12" style="width: 100%">
						<div class="site-credits" style="justify-content: center;  align-items: center; text-align: center; width: 100%">&copy; 2020 CoderVN</div>
					</div>
					
				</div>
			</div><!-- .container -->
		</div><!-- .footer-copy -->
		
	</footer><!-- #colophon -->
</div><!-- #page -->

<script type='text/javascript' src='../../../../wp-content/themes/type/js/skip-link-focus-fix4a7d.js?ver=20151215' id='type-skip-link-focus-fix-js'></script>
<script type='text/javascript' src='../../../../wp-content/themes/type/js/main01f4.js?ver=20171003' id='type-script-js'></script>
<script type='text/javascript' src='../../../../wp-content/plugins/enlighter/cache/enlighterjs.min5b97.js?ver=0A0B0C' id='enlighterjs-js'></script>
<script type='text/javascript' id='enlighterjs-js-after'>
!function(e,n){if("undefined"!=typeof EnlighterJS){var o={"selectors":{"block":"pre.EnlighterJSRAW","inline":"code.EnlighterJSRAW"},"options":{"indent":4,"ampersandCleanup":true,"linehover":true,"rawcodeDbclick":false,"textOverflow":"break","linenumbers":true,"theme":"enlighter","language":"generic","retainCssClasses":false,"collapse":false,"toolbarOuter":"","toolbarTop":"{BTN_RAW}{BTN_COPY}{BTN_WINDOW}{BTN_WEBSITE}","toolbarBottom":""}};(e.EnlighterJSINIT=function(){EnlighterJS.init(o.selectors.block,o.selectors.inline,o.options)})()}else{(n&&(n.error||n.log)||function(){})("Error: EnlighterJS resources not loaded yet!")}}(window,console);
</script>
<script type='text/javascript' src='../../../../wp-includes/js/wp-embed.mind03b.js?ver=5.5.1' id='wp-embed-js'></script>

</body>

<!-- Mirrored from localhost/2020/09/22/iot-esp8266-03-dieu-khien-do-sang-mo-led-voi-pwm/ by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 23 Sep 2020 17:34:56 GMT -->
</html>
