<?xml version="1.0" encoding="UTF-8"?><rss version="2.0"
	xmlns:content="http://purl.org/rss/1.0/modules/content/"
	xmlns:wfw="http://wellformedweb.org/CommentAPI/"
	xmlns:dc="http://purl.org/dc/elements/1.1/"
	xmlns:atom="http://www.w3.org/2005/Atom"
	xmlns:sy="http://purl.org/rss/1.0/modules/syndication/"
	xmlns:slash="http://purl.org/rss/1.0/modules/slash/"
	>

<channel>
	<title>lap trinh nodemcu &#8211; CoderVN</title>
	<atom:link href="http://localhost/tag/lap-trinh-nodemcu-2/feed/" rel="self" type="application/rss+xml" />
	<link>http://localhost</link>
	<description>Hành trình trở thành FULL STACK DEVELOPER</description>
	<lastBuildDate>Wed, 23 Sep 2020 17:29:51 +0000</lastBuildDate>
	<language>vi</language>
	<sy:updatePeriod>
	hourly	</sy:updatePeriod>
	<sy:updateFrequency>
	1	</sy:updateFrequency>
	<generator>https://wordpress.org/?v=5.5.1</generator>
	<item>
		<title>IOT-ESP8266: 05-Ngắt và timer</title>
		<link>http://localhost/2020/09/23/iot-esp8266-05-ngat-va-timer/</link>
		
		<dc:creator><![CDATA[codervn]]></dc:creator>
		<pubDate>Wed, 23 Sep 2020 17:16:54 +0000</pubDate>
				<category><![CDATA[Lập trình arduino]]></category>
		<category><![CDATA[lap trinh arduino]]></category>
		<category><![CDATA[lập trình arduino]]></category>
		<category><![CDATA[lập trình esp8266]]></category>
		<category><![CDATA[lap trinh esp8266]]></category>
		<category><![CDATA[lap trinh nodemcu]]></category>
		<category><![CDATA[lập trình nodemcu]]></category>
		<category><![CDATA[tim hieu arduino]]></category>
		<category><![CDATA[tìm hiểu arduino]]></category>
		<category><![CDATA[tìm hiểu esp8266]]></category>
		<category><![CDATA[tim hieu esp8266]]></category>
		<category><![CDATA[tim hieu node mcu]]></category>
		<guid isPermaLink="false">http://localhost/?p=184</guid>

					<description><![CDATA[Các chương trình trước chúng ta đều viết theo dạng tuần tự, nghĩa là các câu lệnh sẽ chạy lần lượt trong hàm loop, sau [&#8230;] <span class="read-more-link"><a class="read-more" href="http://localhost/2020/09/23/iot-esp8266-05-ngat-va-timer/">Xem thêm</a></span>]]></description>
										<content:encoded><![CDATA[
<p>Các chương trình trước chúng ta đều viết theo dạng tuần tự, nghĩa là các câu lệnh sẽ chạy lần lượt trong hàm loop, sau đó sẽ chạy lại từ đầu. Nhưng trong các chương trình phức tạp và đòi hỏi thời gian đáp ứng thật nhanh(như nhấn nút để điều khiển gì đó) mà trong chương trình chính trong hàm loop thì quá dài, nếu chúng ta vẫn sử dụng phương pháp đọc input trong hàm loop thì bị trễ. </p>



<p>Với ngắt, bạn không cần phải liên tục kiểm tra giá trị pin hiện tại. Khi một thay đổi được phát hiện, một sự kiện sẽ được kích hoạt &#8211; một hàm được gọi. Chức năng này được gọi là thường trình dịch vụ ngắt (ISR).</p>



<p>Do đó để khắc phục được việc đó chúng ta sử dụng ngắt(interrupt), có rất nhiều dạng ngắt khác nhau như: ngắt external(chân input), ngắt nhận dữ liệu uart, ngắt timer,&#8230;</p>



<p><strong>Cơ chế hoạt động của ngắt </strong></p>



<figure class="wp-block-image size-large"><img loading="lazy" width="992" height="291" src="http://localhost/wp-content/uploads/2020/09/interrupt.png" alt="" class="wp-image-185"/></figure>



<p>main program đại diện cho hàm loop, nếu ngắt chưa xảy ra thì main program cứ thế mà chạy, đến khi có sự kiện ngắt thì chip sẽ dừng xử lý trong chương trình main và sẽ chuyển đến chương trình ngắt để xử lý. Sau khi thực hiện xong trong chương trình ngắt, chip sẽ quay về thực hiện tiếp tục vị trí chương trình trước đó trong hàm main.</p>



<p>Bên dưới sẽ mô tả kỹ hơn về quá trình thực hiện chương trình ngắt:</p>



<figure class="wp-block-image size-large"><img loading="lazy" width="620" height="295" src="http://localhost/wp-content/uploads/2020/09/fig2-interrupt-processing-flow-en.jpg" alt="" class="wp-image-187"/></figure>



<p><strong>Sử dụng ngắt ngoài(từ chân input) trên arduino</strong></p>



<p>Để cài đặt 1 ngắt trong Arduino thì chúng ta sử dụng hàm attachInterrupt()</p>



<pre class="EnlighterJSRAW" data-enlighter-language="generic" data-enlighter-theme="" data-enlighter-highlight="" data-enlighter-linenumbers="" data-enlighter-lineoffset="" data-enlighter-title="" data-enlighter-group="">attachInterrupt(digitalPinToInterrupt(GPIO), ISR, mode);</pre>



<p>Trong đó </p>



<ul><li>digitalPinToInterrupt(GPIO): gán chân IO dạng digital vào chân ngắt, với GPIO là các chân IO trên nodemcu</li><li>ISR: là tên của hàm được gọi khi có ngắt xảy ra</li><li>mode: là các chế độ để kích hoạt ngắt, chúng ta có 3 chế độ: <strong>CHANGE</strong>G-khi có sự thay đổi của chân input, <strong>FALLING</strong>-khi chân input thay đổi trạng thái từ cao -> thấp và cuối cùng <strong>RISING</strong>-khi chân input thay đổi trạng thái từ thấp -> cao</li></ul>



<p></p>
]]></content:encoded>
					
		
		
			</item>
		<item>
		<title>IOT-ESP8266: 03-Điều khiển độ sáng/mờ led với PWM</title>
		<link>http://localhost/2020/09/22/iot-esp8266-03-dieu-khien-do-sang-mo-led-voi-pwm/</link>
		
		<dc:creator><![CDATA[codervn]]></dc:creator>
		<pubDate>Tue, 22 Sep 2020 16:37:13 +0000</pubDate>
				<category><![CDATA[Lập trình arduino]]></category>
		<category><![CDATA[lập trình arduino]]></category>
		<category><![CDATA[lap trình arduino]]></category>
		<category><![CDATA[lap trinh node mcu]]></category>
		<category><![CDATA[lập trình node mcu]]></category>
		<category><![CDATA[lap trinh nodemcu]]></category>
		<category><![CDATA[lập trình nodemcu]]></category>
		<category><![CDATA[tìm hiểu esp8266]]></category>
		<category><![CDATA[tim hieu esp8266]]></category>
		<category><![CDATA[tìm hiểu nodemcu]]></category>
		<category><![CDATA[tim hieu nodemcu]]></category>
		<guid isPermaLink="false">http://localhost/?p=155</guid>

					<description><![CDATA[Ở bài trước chúng ta đã làm được ứng dụng điều khiển sáng-tắt led cũng khá đơn giản 😀 Nhưng việc điều khiển led không [&#8230;] <span class="read-more-link"><a class="read-more" href="http://localhost/2020/09/22/iot-esp8266-03-dieu-khien-do-sang-mo-led-voi-pwm/">Xem thêm</a></span>]]></description>
										<content:encoded><![CDATA[
<p>Ở bài trước chúng ta đã làm được ứng dụng điều khiển sáng-tắt led cũng khá đơn giản <img src="https://s.w.org/images/core/emoji/13.0.0/72x72/1f600.png" alt="😀" class="wp-smiley" style="height: 1em; max-height: 1em;" /> Nhưng việc điều khiển led không chỉ dừng ở việc chỉ bật tắt led, chúng ta còn có thể điều khiển mức sáng của các led bằng cách điều khiển sáng/tắt luân phiên nhau với tần số lớn </p>



<p></p>



<figure class="wp-block-image size-large"><img loading="lazy" width="895" height="182" src="http://localhost/wp-content/uploads/2020/09/led-fade.png" alt="" class="wp-image-159"/></figure>



<p>Ở trên là ví dụ về các mức sáng trên led, bao gồm 5 mức. Trong đó có 2 mức dễ nhận biết và dễ điều khiển nhất là 0%(ứng với led đang tắt) và 100% (ứng với mức led sáng nhất-đang bật led liên tục). Vậy 3 mức ở giữa thì như thế nào, các bạn xem hình bên dưới nhé </p>



<figure class="wp-block-image size-large"><img loading="lazy" width="711" height="658" src="http://localhost/wp-content/uploads/2020/09/PWM-how-it-works.png" alt="" class="wp-image-161"/></figure>



<p>Có 2 thuật ngữ chúng ta cần quan tâm đó là period và duty cycle. Period tương ứng với chu kỳ, độ rộng của period dùng để tính tần số xung hoặc suy ngược lại từ tần số đặt để tính ra giá trị period. Duty cycle là chu kỳ của mức xung tích cực, trong bài viết này mức xung tích cực là dương, ngoài ra duty cycle còn có thể là mức xung thấp, tùy theo mạch thiết kế</p>



<p>Duty cycle 50% dẫn đến độ sáng LED 50%, Duty cycle bằng 0 có nghĩa là đèn LED tắt hoàn toàn và chu kỳ nhiệm vụ 100 có nghĩa là đèn LED bật hoàn toàn. Thay đổi Duty cycle là cách bạn tạo ra các mức độ sáng khác nhau.</p>



<p><strong>Sử dụng PWM trong ArduinoIDE</strong></p>



<p>Trong arduino có các hàm để xuất pwm:</p>



<ul><li>analogWrite(pin, value): dùng để tạo tín hiệu pwm trên một chân nào đó</li><li>analogWriteRange(new_range): bạn cũng có thể thay đổi phạm vi PWM</li><li>analogWriteFreq(new_frequency): Theo mặc định, tần số PWM của ESP8266 là 1kHz. Bạn có thể thay đổi tần số PWM bằng lệnh này</li></ul>



<p><strong>Kết nối phần cứng</strong></p>



<p>Cũng tương tự như phần cứng bài trước để test led <img src="https://s.w.org/images/core/emoji/13.0.0/72x72/1f600.png" alt="😀" class="wp-smiley" style="height: 1em; max-height: 1em;" /> </p>



<figure class="wp-block-image size-large"><img loading="lazy" width="930" height="543" src="http://localhost/wp-content/uploads/2020/09/ESP8266_PWM_bb.png" alt="" class="wp-image-163"/></figure>



<p><strong>Code</strong></p>



<pre class="wp-block-code"><code>const int ledPin = 2; 

void setup() {
  
}

void loop() {
  // increase the LED brightness
  for(int dutyCycle = 0; dutyCycle &amp;lt; 1023; dutyCycle++){   
    // changing the LED brightness with PWM
    analogWrite(ledPin, dutyCycle);
    delay(1);
  }

  // decrease the LED brightness
  for(int dutyCycle = 1023; dutyCycle > 0; dutyCycle--){
    // changing the LED brightness with PWM
    analogWrite(ledPin, dutyCycle);
    delay(1);
  }
}</code></pre>



<p><strong>Kết quả</strong></p>



<p>Để có thể quan sát được xung pwm các bạn nên dùng oscilloscope để đo nhé <img src="https://s.w.org/images/core/emoji/13.0.0/72x72/1f600.png" alt="😀" class="wp-smiley" style="height: 1em; max-height: 1em;" /></p>



<figure class="wp-block-image size-large"><img loading="lazy" width="655" height="481" src="http://localhost/wp-content/uploads/2020/09/PWM_signal_ESP8266_oscilloscope.png" alt="" class="wp-image-169"/></figure>



<p></p>
]]></content:encoded>
					
		
		
			</item>
		<item>
		<title>IOT-ESP8266: 02-Chương trình nháy led</title>
		<link>http://localhost/2020/09/21/iot-esp8266-02-chuong-trinh-nhay-led/</link>
		
		<dc:creator><![CDATA[codervn]]></dc:creator>
		<pubDate>Mon, 21 Sep 2020 14:48:05 +0000</pubDate>
				<category><![CDATA[Lập trình arduino]]></category>
		<category><![CDATA[hệ thống iot]]></category>
		<category><![CDATA[he thong iot]]></category>
		<category><![CDATA[lap trinh arduino]]></category>
		<category><![CDATA[lập trình arduino]]></category>
		<category><![CDATA[lập trình esp8266]]></category>
		<category><![CDATA[lap trinh esp8266]]></category>
		<category><![CDATA[lap trinh iot]]></category>
		<category><![CDATA[lập trình node mcu]]></category>
		<category><![CDATA[lap trinh nodemcu]]></category>
		<category><![CDATA[lập trình nodemcu]]></category>
		<category><![CDATA[tìm hiểu esp8266]]></category>
		<category><![CDATA[tim hieu esp8266]]></category>
		<category><![CDATA[tìm hiểu nodemcu]]></category>
		<guid isPermaLink="false">http://localhost/?p=144</guid>

					<description><![CDATA[Tìm hiểu phần cứng Trong Arduino sẽ định danh các ngõ vào-ra(dạng 0-mức cao/1-mức thấp) thành ký hiệu Dx với x là số thứ tự [&#8230;] <span class="read-more-link"><a class="read-more" href="http://localhost/2020/09/21/iot-esp8266-02-chuong-trinh-nhay-led/">Xem thêm</a></span>]]></description>
										<content:encoded><![CDATA[
<p><strong>Tìm hiểu phần cứng</strong></p>



<figure class="wp-block-image size-large"><img loading="lazy" width="666" height="364" src="http://localhost/wp-content/uploads/2020/09/ESP-12E-Development-Board-ESP8266-NodeMCU-Pinout.jpg" alt="" class="wp-image-133"/></figure>



<p>Trong Arduino sẽ định danh các ngõ vào-ra(dạng 0-mức cao/1-mức thấp) thành ký hiệu Dx với x là số thứ tự bắt đầu từ 0 được in trực tiếp trên bo, mỗi chân Dx đều có thể cấu hình là input hoặc là output bên trong code. Ngoài các chân digital ta có thêm chân A0-ADC0 dùng để đọc mức analog(điện áp).</p>



<p><strong>Kết nối phần cứng</strong><br></p>



<figure class="wp-block-image size-large"><img loading="lazy" width="666" height="641" src="http://localhost/wp-content/uploads/2020/09/esp8266_led_blinker.png" alt="" class="wp-image-147"/></figure>



<p>Do trên bo đã tích hợp sẵn IC CP2102 để nạp chương trình và đã cấp nguồn thông qua cổng USB vì thế ta chỉ cần gắn led và trở vào. Ở đây ta gắn chân D8 nối vào chân Anode(chân dương) của led, chân Cathode(chân âm) của led nối vào GND</p>



<p><strong>Cấu trúc chương trình trong Arduino</strong></p>



<figure class="wp-block-image size-large"><img loading="lazy" width="490" height="326" src="http://localhost/wp-content/uploads/2020/09/1_oKMRi3xcs5jszcVekHgp4A.png" alt="" class="wp-image-150"/></figure>



<p>Mỗi chương trình arduino có hai hàm bắt buộc: setup () và loop (). Mã bên trong hàm setup () được thực thi một lần và hàm này để thiết lập môi trường chương trình Arduino của bạn ngay từ đầu. Hàm loop () được chạy liên tục trong khi chip được cấp nguồn và đã thực thi hàm setup () khởi tạo. Ngoài ra có thêm các chương trình xử lý ngắt sẽ thực thi khi có sự kiện mà đã cấu hình cho phép ngắt</p>



<p>Các lệnh thường gặp trong hàm setup()</p>



<ul><li>#define LED D8: Thường để chương trình đọc dễ hiểu hơn thì chúng ta sẽ mặc định các ký tự dễ phân biệt(như LED, BUTTON) vào các chân IO</li><li>const int LED = 8: Cách này cũng gần tương tự như dùng #define nhưng cách này sẽ liên quan đến kiểu dữ liệu(int) mà ta chọn. Biến khi tạo ra sẽ không thể thay đổi được giá trị do ta đã định nghĩa là kiểu hằng số</li><li>pinMode(pin, mode): Định nghĩa 1 chân IO nào đó là output hoặc input, với pin là các chân IO(từ D0-&gt;Dx&#8230;)</li></ul>



<p><strong>Chương trình nháy led cơ bản</strong></p>



<figure class="wp-block-image size-large"><img loading="lazy" width="774" height="519" src="http://localhost/wp-content/uploads/2020/09/2019-04-28-18_52_34-example_LED-_-Arduino-1.8.9.png" alt="" class="wp-image-153"/></figure>



<p>Có thể vào File-&gt;Example để lấy project mẫu Blink hoặc có thể tự gõ code để nhớ hơn ^^ Sau đó nạp xuống dưới bo</p>



<p>Lưu ý vào Tools -&gt; Chọn port đúng với port đăng gắn nodemcu</p>



<figure class="wp-block-image size-large"><img loading="lazy" width="778" height="519" src="http://localhost/wp-content/uploads/2020/09/2019-04-28-18_46_03-example_LED-_-Arduino-1.8.9.png" alt="" class="wp-image-149"/></figure>
]]></content:encoded>
					
		
		
			</item>
	</channel>
</rss>
