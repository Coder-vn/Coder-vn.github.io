{"id":155,"date":"2020-09-22T16:37:13","date_gmt":"2020-09-22T16:37:13","guid":{"rendered":"http:\/\/localhost\/?p=155"},"modified":"2020-09-23T16:12:36","modified_gmt":"2020-09-23T16:12:36","slug":"iot-esp8266-03-dieu-khien-do-sang-mo-led-voi-pwm","status":"publish","type":"post","link":"http:\/\/localhost\/2020\/09\/22\/iot-esp8266-03-dieu-khien-do-sang-mo-led-voi-pwm\/","title":{"rendered":"IOT-ESP8266: 03-\u0110i\u1ec1u khi\u1ec3n \u0111\u1ed9 s\u00e1ng\/m\u1edd led v\u1edbi PWM"},"content":{"rendered":"\n<p>\u1ede b\u00e0i tr\u01b0\u1edbc ch\u00fang ta \u0111\u00e3 l\u00e0m \u0111\u01b0\u1ee3c \u1ee9ng d\u1ee5ng \u0111i\u1ec1u khi\u1ec3n s\u00e1ng-t\u1eaft led c\u0169ng kh\u00e1 \u0111\u01a1n gi\u1ea3n \ud83d\ude00 Nh\u01b0ng vi\u1ec7c \u0111i\u1ec1u khi\u1ec3n led kh\u00f4ng ch\u1ec9 d\u1eebng \u1edf vi\u1ec7c ch\u1ec9 b\u1eadt t\u1eaft led, ch\u00fang ta c\u00f2n c\u00f3 th\u1ec3 \u0111i\u1ec1u khi\u1ec3n m\u1ee9c s\u00e1ng c\u1ee7a c\u00e1c led b\u1eb1ng c\u00e1ch \u0111i\u1ec1u khi\u1ec3n s\u00e1ng\/t\u1eaft lu\u00e2n phi\u00ean nhau v\u1edbi t\u1ea7n s\u1ed1 l\u1edbn <\/p>\n\n\n\n<p><\/p>\n\n\n\n<figure class=\"wp-block-image size-large\"><img loading=\"lazy\" width=\"895\" height=\"182\" src=\"http:\/\/localhost\/wp-content\/uploads\/2020\/09\/led-fade.png\" alt=\"\" class=\"wp-image-159\"\/><\/figure>\n\n\n\n<p>\u1ede tr\u00ean l\u00e0 v\u00ed d\u1ee5 v\u1ec1 c\u00e1c m\u1ee9c s\u00e1ng tr\u00ean led, bao g\u1ed3m 5 m\u1ee9c. Trong \u0111\u00f3 c\u00f3 2 m\u1ee9c d\u1ec5 nh\u1eadn bi\u1ebft v\u00e0 d\u1ec5 \u0111i\u1ec1u khi\u1ec3n nh\u1ea5t l\u00e0 0%(\u1ee9ng v\u1edbi led \u0111ang t\u1eaft) v\u00e0 100% (\u1ee9ng v\u1edbi m\u1ee9c led s\u00e1ng nh\u1ea5t-\u0111ang b\u1eadt led li\u00ean t\u1ee5c). V\u1eady 3 m\u1ee9c \u1edf gi\u1eefa th\u00ec nh\u01b0 th\u1ebf n\u00e0o, c\u00e1c b\u1ea1n xem h\u00ecnh b\u00ean d\u01b0\u1edbi nh\u00e9 <\/p>\n\n\n\n<figure class=\"wp-block-image size-large\"><img loading=\"lazy\" width=\"711\" height=\"658\" src=\"http:\/\/localhost\/wp-content\/uploads\/2020\/09\/PWM-how-it-works.png\" alt=\"\" class=\"wp-image-161\"\/><\/figure>\n\n\n\n<p>C\u00f3 2 thu\u1eadt ng\u1eef ch\u00fang ta c\u1ea7n quan t\u00e2m \u0111\u00f3 l\u00e0 period v\u00e0 duty cycle. Period t\u01b0\u01a1ng \u1ee9ng v\u1edbi chu k\u1ef3, \u0111\u1ed9 r\u1ed9ng c\u1ee7a period d\u00f9ng \u0111\u1ec3 t\u00ednh t\u1ea7n s\u1ed1 xung ho\u1eb7c suy ng\u01b0\u1ee3c l\u1ea1i t\u1eeb t\u1ea7n s\u1ed1 \u0111\u1eb7t \u0111\u1ec3 t\u00ednh ra gi\u00e1 tr\u1ecb period. Duty cycle l\u00e0 chu k\u1ef3 c\u1ee7a m\u1ee9c xung t\u00edch c\u1ef1c, trong b\u00e0i vi\u1ebft n\u00e0y m\u1ee9c xung t\u00edch c\u1ef1c l\u00e0 d\u01b0\u01a1ng, ngo\u00e0i ra duty cycle c\u00f2n c\u00f3 th\u1ec3 l\u00e0 m\u1ee9c xung th\u1ea5p, t\u00f9y theo m\u1ea1ch thi\u1ebft k\u1ebf<\/p>\n\n\n\n<p>Duty cycle 50% d\u1eabn \u0111\u1ebfn \u0111\u1ed9 s\u00e1ng LED 50%, Duty cycle b\u1eb1ng 0 c\u00f3 ngh\u0129a l\u00e0 \u0111\u00e8n LED t\u1eaft ho\u00e0n to\u00e0n v\u00e0 chu k\u1ef3 nhi\u1ec7m v\u1ee5 100 c\u00f3 ngh\u0129a l\u00e0 \u0111\u00e8n LED b\u1eadt ho\u00e0n to\u00e0n. Thay \u0111\u1ed5i Duty cycle l\u00e0 c\u00e1ch b\u1ea1n t\u1ea1o ra c\u00e1c m\u1ee9c \u0111\u1ed9 s\u00e1ng kh\u00e1c nhau.<\/p>\n\n\n\n<p><strong>S\u1eed d\u1ee5ng PWM trong ArduinoIDE<\/strong><\/p>\n\n\n\n<p>Trong arduino c\u00f3 c\u00e1c h\u00e0m \u0111\u1ec3 xu\u1ea5t pwm:<\/p>\n\n\n\n<ul><li>analogWrite(pin, value): d\u00f9ng \u0111\u1ec3 t\u1ea1o t\u00edn hi\u1ec7u pwm tr\u00ean m\u1ed9t ch\u00e2n n\u00e0o \u0111\u00f3<\/li><li>analogWriteRange(new_range): b\u1ea1n c\u0169ng c\u00f3 th\u1ec3 thay \u0111\u1ed5i ph\u1ea1m vi PWM<\/li><li>analogWriteFreq(new_frequency): Theo m\u1eb7c \u0111\u1ecbnh, t\u1ea7n s\u1ed1 PWM c\u1ee7a ESP8266 l\u00e0 1kHz. B\u1ea1n c\u00f3 th\u1ec3 thay \u0111\u1ed5i t\u1ea7n s\u1ed1 PWM b\u1eb1ng l\u1ec7nh n\u00e0y<\/li><\/ul>\n\n\n\n<p><strong>K\u1ebft n\u1ed1i ph\u1ea7n c\u1ee9ng<\/strong><\/p>\n\n\n\n<p>C\u0169ng t\u01b0\u01a1ng t\u1ef1 nh\u01b0 ph\u1ea7n c\u1ee9ng b\u00e0i tr\u01b0\u1edbc \u0111\u1ec3 test led \ud83d\ude00 <\/p>\n\n\n\n<figure class=\"wp-block-image size-large\"><img loading=\"lazy\" width=\"930\" height=\"543\" src=\"http:\/\/localhost\/wp-content\/uploads\/2020\/09\/ESP8266_PWM_bb.png\" alt=\"\" class=\"wp-image-163\"\/><\/figure>\n\n\n\n<p><strong>Code<\/strong><\/p>\n\n\n\n<pre class=\"wp-block-code\"><code>const int ledPin = 2; \n\nvoid setup() {\n  \n}\n\nvoid loop() {\n  \/\/ increase the LED brightness\n  for(int dutyCycle = 0; dutyCycle &amp;lt; 1023; dutyCycle++){   \n    \/\/ changing the LED brightness with PWM\n    analogWrite(ledPin, dutyCycle);\n    delay(1);\n  }\n\n  \/\/ decrease the LED brightness\n  for(int dutyCycle = 1023; dutyCycle > 0; dutyCycle--){\n    \/\/ changing the LED brightness with PWM\n    analogWrite(ledPin, dutyCycle);\n    delay(1);\n  }\n}<\/code><\/pre>\n\n\n\n<p><strong>K\u1ebft qu\u1ea3<\/strong><\/p>\n\n\n\n<p>\u0110\u1ec3 c\u00f3 th\u1ec3 quan s\u00e1t \u0111\u01b0\u1ee3c xung pwm c\u00e1c b\u1ea1n n\u00ean d\u00f9ng oscilloscope \u0111\u1ec3 \u0111o nh\u00e9 \ud83d\ude00<\/p>\n\n\n\n<figure class=\"wp-block-image size-large\"><img loading=\"lazy\" width=\"655\" height=\"481\" src=\"http:\/\/localhost\/wp-content\/uploads\/2020\/09\/PWM_signal_ESP8266_oscilloscope.png\" alt=\"\" class=\"wp-image-169\"\/><\/figure>\n\n\n\n<p><\/p>\n","protected":false},"excerpt":{"rendered":"<p>\u1ede b\u00e0i tr\u01b0\u1edbc ch\u00fang ta \u0111\u00e3 l\u00e0m \u0111\u01b0\u1ee3c \u1ee9ng d\u1ee5ng \u0111i\u1ec1u khi\u1ec3n s\u00e1ng-t\u1eaft led c\u0169ng kh\u00e1 \u0111\u01a1n gi\u1ea3n \ud83d\ude00 Nh\u01b0ng vi\u1ec7c \u0111i\u1ec1u khi\u1ec3n led kh\u00f4ng [&hellip;] <span class=\"read-more-link\"><a class=\"read-more\" href=\"http:\/\/localhost\/2020\/09\/22\/iot-esp8266-03-dieu-khien-do-sang-mo-led-voi-pwm\/\">Xem th\u00eam<\/a><\/span><\/p>\n","protected":false},"author":1,"featured_media":157,"comment_status":"open","ping_status":"open","sticky":false,"template":"","format":"standard","meta":[],"categories":[4],"tags":[9,26,18,19,22,25,21,24,20,27],"_links":{"self":[{"href":"http:\/\/localhost\/wp-json\/wp\/v2\/posts\/155"}],"collection":[{"href":"http:\/\/localhost\/wp-json\/wp\/v2\/posts"}],"about":[{"href":"http:\/\/localhost\/wp-json\/wp\/v2\/types\/post"}],"author":[{"embeddable":true,"href":"http:\/\/localhost\/wp-json\/wp\/v2\/users\/1"}],"replies":[{"embeddable":true,"href":"http:\/\/localhost\/wp-json\/wp\/v2\/comments?post=155"}],"version-history":[{"count":9,"href":"http:\/\/localhost\/wp-json\/wp\/v2\/posts\/155\/revisions"}],"predecessor-version":[{"id":170,"href":"http:\/\/localhost\/wp-json\/wp\/v2\/posts\/155\/revisions\/170"}],"wp:featuredmedia":[{"embeddable":true,"href":"http:\/\/localhost\/wp-json\/wp\/v2\/media\/157"}],"wp:attachment":[{"href":"http:\/\/localhost\/wp-json\/wp\/v2\/media?parent=155"}],"wp:term":[{"taxonomy":"category","embeddable":true,"href":"http:\/\/localhost\/wp-json\/wp\/v2\/categories?post=155"},{"taxonomy":"post_tag","embeddable":true,"href":"http:\/\/localhost\/wp-json\/wp\/v2\/tags?post=155"}],"curies":[{"name":"wp","href":"https:\/\/api.w.org\/{rel}","templated":true}]}}